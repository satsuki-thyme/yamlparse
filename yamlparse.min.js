function yamlparse(e){let a=e.split(/\r?\n/),l=[],t=[],s=a.length-1;for(let e in a)/^[ \t]*(?<!\\(\\\\)*)#.*$/.test(a[e])?t[e]="comment":/^((?!.*\\(\\\\)*:).*?)(?<!\\(\\\\)*)(?=:)/.test(a[e])?t[e]="key":/^[ \t]*(?!.*(\\\\)*#).+$/.test(a[e])?t[e]="value":/^[ \t]*$/.test(a[e])?t[e]="blank":t[e]="other";let n=new Set,c=[];for(let e in a){let l=(a[e].match(/^[ \t]*/)||[])[0].length;a[e]=a[e].replace(/^[ \t]*/,""),"key"===t[e]&&n.add(l),c.push(l)}let p=Array.from(new Set(Array.from(n).reduce((e,a)=>[a,e[1].concat([a-e[0]])],[0,[0]])[1])).filter(e=>0!==e)[0],$=[];for(let e in c)$[e]=Math.round(c[e]/p)+1;let r=0,i=[],m=[],u=new Map,o=0;return new Promise(e=>{function n(){if("key"===t[o]){let e=$[o]-r;r=$[o];let t=`${(a[o].match(/^((?!.*\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0].replace(/^(- )?(.*)/,'$1<span class="key">$2</span>').replace(/^- /g,'<span class="bullet">-</span> ')}<span class="colon">:</span> `,n=`key-group ${(a[o].match(/^((?!.*\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0].replace(/^- /,"").replace(/ /g,"-").replace(/^([0-9])/,"n$1")}`,c=(a[o].match(/^((?!.*\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0].replace(/^- /,"");u.set(c,n);let p=`${(a[o].match(/(?<=:)(.*)$/)||[""])[0].replace(/(.+)/,'<span class="value">$1</span>')}`;if(o>0&&o<s){if(e>0&&(l[o]=`<div class="${n}">${t}${p}`,i.push(c),m.push(n)),0===e){let e="</div>";l[o]=`${e}<div class="${n}">${t}${p}`,i.splice(-1),m.splice(-1),i.push(c),m.push(n)}if(e<0){let a="</div>".repeat(1-e);l[o]=`${a}<div class="${n}">${t}${p}`,i.splice(e),m.splice(e),i.push(c),m.push(n)}}0===o&&o<s&&(l[o]=`<div class="${n}">${t}${p}`,i.push(c),m.push(n)),o>0&&o===s&&(l[o]=`${"</div>".repeat(1-e)}<div class="${n}">${t}${p}${"</div>".repeat($[o]-1)}`,i.splice(e),m.splice(e),i.push(c),m.push(n)),0===s&&(l[o]=`<div class="${n}">${t}${p}${"</div>".repeat($[o]-1)}`,i.push(c).splice(1-$[o]),m.push(n).splice(1-$[o]))}if("value"===t[o]){let e=$[o]-r;r=$[o];let n=`${a[o].replace(/^(- )?(.*)$/,'$1<span class="value">$2</span>').replace(/^- /,'<span class="bullet">-</span> ')}`;o>0&&o<s&&(e>0&&(l[o]=`<div class="value-group">${n}`),0===e&&(l[o]=`<br>${n}`),e<0&&(l[o]=`${"</div>".repeat(-e)}${n}`)),0===o&&o<s&&("value"===t[o+1]&&(l[o]=`<div>${n}`),"value"!==t[o+1]&&(l[o]=`<div>${n}</div>`)),o>0&&o===s&&("value"===t[o-1]&&(l[o]=`<br>${n}${"</div>".repeat($[o]-1)}`),"value"!==t[o-1]&&(l[o]=`<div>${n}${"</div>".repeat($[o]-1)}`)),0===s&&(l[o]=`<div>${n}${"</div>".repeat($[o]-1)}`)}"comment"===t[o]&&(o>0&&o<s&&("comment"===t[o-1]&&"comment"===t[o+1]&&(l[o]=""),"comment"!==t[o-1]&&"comment"===t[o+1]&&(l[o]=""),"comment"===t[o-1]&&"comment"!==t[o+1]&&(l[o]=""),"comment"!==t[o-1]&&"comment"!==t[o+1]&&(l[o]="")),0===o&&o<s&&("comment"===t[o+1]&&(l[o]=""),"comment"!==t[o+1]&&(l[o]="")),o>0&&o===s&&("comment"===t[o-1]&&(l[o]=""),"comment"!==t[o-1]&&(l[o]="")),0===s&&(l[o]="")),"blank"===t[o]&&(o>0&&o<s&&("blank"===t[o-1]&&"blank"===t[o+1]&&(l[o]="<br>"),"blank"!==t[o-1]&&"blank"===t[o+1]&&(l[o]="<br>"),"blank"===t[o-1]&&"blank"!==t[o+1]&&(l[o]="<br>"),"blank"!==t[o-1]&&"blank"!==t[o+1]&&(l[o]="<br>")),0===o&&o<s&&("blank"===t[o+1]&&(l[o]="<br>"),"blank"!==t[o+1]&&(l[o]="<br>")),o>0&&o===s&&("blank"===t[o-1]&&(l[o]="<br>"),"blank"!==t[o-1]&&(l[o]="<br>")),0===s&&(l[o]="<br>")),t[o],o<s?(o++,n()):e(l)}n()}).then(e=>[e.join(""),u])}