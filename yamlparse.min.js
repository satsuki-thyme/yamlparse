function yamlparse(e){let a=e.split(/\r?\n/),l=[],s=[],t=a.length-1;for(let e in a)/^[ \t]*(?<!\\(\\\\)*)#.*$/.test(a[e])?s[e]="comment":/^((?!.*\\(\\\\)*:).*?)(?<!\\(\\\\)*)(?=:)/.test(a[e])?s[e]="key":/^[ \t]*(?!.*(\\\\)*#).+$/.test(a[e])?s[e]="value":/^[ \t]*$/.test(a[e])?s[e]="blank":s[e]="other";let n=new Set,p=[];for(let e in a){let l=(a[e].match(/^[ \t]*/)||[])[0].length;a[e]=a[e].replace(/^[ \t]*/,""),"key"===s[e]&&n.add(l),p.push(l)}let c=Array.from(new Set(Array.from(n).reduce((e,a)=>[a,e[1].concat([a-e[0]])],[0,[0]])[1])).filter(e=>0!==e)[0],r=[];for(let e in p)r[e]=Math.round(p[e]/c)+1;let $=0,i=[],m=[],u=new Map,b=0;return new Promise(e=>{function n(){if("key"===s[b]){let e=r[b]-$;$=r[b];let s=(a[b].match(/^((?!\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0];Number(s.replace(/^ *| *$/,""))&&(s=s.replace(/^( *)(\d+)( *)$/,'$1<span class="number">$2</span>$3'));let n=`${s.replace(/^(- )?(.*)/,'$1<span class="key">$2</span>').replace(/^- /g,'<span class="bullet">-</span> ')}<span class="colon">:</span> `,p=`key-group ${(a[b].match(/^((?!\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0].replace(/^- /,"").replace(/ /g,"-").replace(/^([0-9])/,"n$1")}`,c=(a[b].match(/^((?!\\(\\\\)*:).*)(?<!\\(\\\\)*)(?=:)/)||[""])[0].replace(/^- /,"");u.set(c,p);let v=(a[b].match(/(?<=:)(.*)$/)||[""])[0];Number(v.replace(/^ *| *$/,""))&&(v=v.replace(/^( *)(\d+)( *)$/,'$1<span class="number">$2</span>$3')),/^ *\| *$/.test(v)&&(v=' <span class="vertical-bar">|</span>');let o=`${v.replace(/(.+)/,'<span class="value">$1</span>')}`;if(b>0&&b<t){if(e>0&&(l[b]=`<div class="${p}">${n}${o}`,i.push(c),m.push(p)),0===e){let e="</div>";l[b]=`${e}<div class="${p}">${n}${o}`,i.splice(-1),m.splice(-1),i.push(c),m.push(p)}if(e<0){let a="</div>".repeat(1-e);l[b]=`${a}<div class="${p}">${n}${o}`,i.splice(e),m.splice(e),i.push(c),m.push(p)}}0===b&&b<t&&(l[b]=`<div class="${p}">${n}${o}`,i.push(c),m.push(p)),b>0&&b===t&&(l[b]=`${"</div>".repeat(1-e)}<div class="${p}">${n}${o}${"</div>".repeat(r[b]-1)}`,i.splice(e),m.splice(e),i.push(c),m.push(p)),0===t&&(l[b]=`<div class="${p}">${n}${o}${"</div>".repeat(r[b]-1)}`,i.push(c).splice(1-r[b]),m.push(p).splice(1-r[b]))}if("value"===s[b]){let e=r[b]-$;$=r[b];let n=a[b];Number(n.replace(/^ | $/,""))&&(n=`<span class="number">${n}</span>`),/^ *\| *$/.test(n)&&(n='<span class="vertical-bar">|</span>');let p=`${n.replace(/^(- )?(.*)$/,'$1<span class="value">$2</span>').replace(/^- /,'<span class="bullet">-</span> ')}`;b>0&&b<t&&(e>0&&(l[b]=`<div class="value-group">${p}`),0===e&&(l[b]=`<br>${p}`),e<0&&(l[b]=`${"</div>".repeat(-e)}${p}`)),0===b&&b<t&&("value"===s[b+1]&&(l[b]=`<div>${p}`),"value"!==s[b+1]&&(l[b]=`<div>${p}</div>`)),b>0&&b===t&&("value"===s[b-1]&&(l[b]=`<br>${p}${"</div>".repeat(r[b]-1)}`),"value"!==s[b-1]&&(l[b]=`<div>${p}${"</div>".repeat(r[b]-1)}`)),0===t&&(l[b]=`<div>${p}${"</div>".repeat(r[b]-1)}`)}"comment"===s[b]&&(b>0&&b<t&&("comment"===s[b-1]&&"comment"===s[b+1]&&(l[b]=""),"comment"!==s[b-1]&&"comment"===s[b+1]&&(l[b]=""),"comment"===s[b-1]&&"comment"!==s[b+1]&&(l[b]=""),"comment"!==s[b-1]&&"comment"!==s[b+1]&&(l[b]="")),0===b&&b<t&&("comment"===s[b+1]&&(l[b]=""),"comment"!==s[b+1]&&(l[b]="")),b>0&&b===t&&("comment"===s[b-1]&&(l[b]=""),"comment"!==s[b-1]&&(l[b]="")),0===t&&(l[b]="")),"blank"===s[b]&&(b>0&&b<t&&("blank"===s[b-1]&&"blank"===s[b+1]&&(l[b]="<br>"),"blank"!==s[b-1]&&"blank"===s[b+1]&&(l[b]="<br>"),"blank"===s[b-1]&&"blank"!==s[b+1]&&(l[b]="<br>"),"blank"!==s[b-1]&&"blank"!==s[b+1]&&(l[b]="<br>")),0===b&&b<t&&("blank"===s[b+1]&&(l[b]="<br>"),"blank"!==s[b+1]&&(l[b]="<br>")),b>0&&b===t&&("blank"===s[b-1]&&(l[b]="<br>"),"blank"!==s[b-1]&&(l[b]="<br>")),0===t&&(l[b]="<br>")),s[b],b<t?(b++,n()):e(l)}n()}).then(e=>[e.join(""),u])}